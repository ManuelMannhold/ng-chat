<section class="chat-wrapper">
  <div id="messages">
    <header class="chat-header">
      <h2>Allgemeiner Chat</h2>

      <button class="user-name-btn" type="button" (click)="openNameModal()" title="Name Ã¤ndern">
        ðŸ‘¤ {{ user }}
      </button>
    </header>
    <div class="message-wrapper"  #messagesContainer>
      @for (message of messages; track message) {
      <div class="message" [ngClass]="message.author === user ? 'user-message' : 'bot-message'">
        @if (message.text === '...' && message.author === 'Bot') {
        <div class="bot-typing">Bot tipptâ€¦</div>
        } @else {
        <strong>
          <legend id="user-bot-name">{{ message.author }}</legend>
        </strong> {{ message.text }}
        }
      </div>
      }
    </div>
  </div>

  <div id="input-area">
    <form (submit)="addMessage(input.value); input.value = ''; $event.preventDefault()">
      <input type="text" #input autocomplete="off" />
      <button type="submit"><i class="fa-solid fa-paper-plane"></i></button>
    </form>
  </div>
</section>

<!-- Modal -->
@if(showNameModal) {
<div class="modal-backdrop" (click)="closeNameModal()"></div>
<div class="name-modal">
  <h3>Name Ã¤ndern</h3>
  <input type="text" [(ngModel)]="tempUserName" placeholder="Neuer Name" (keyup.enter)="saveName()" />
  <div class="modal-actions">
    <button (click)="closeNameModal()">Abbrechen</button>
    <button class="primary" (click)="saveName()">Speichern</button>
  </div>
</div>
}